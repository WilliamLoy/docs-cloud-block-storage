<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
<!-- Some useful entities borrowed from HTML -->
<!ENTITY ndash  "&#x2013;">
<!ENTITY mdash  "&#x2014;">
<!ENTITY hellip "&#x2026;">

<!-- Useful for describing APIs -->
<!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
<!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
<!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
<!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>

<!-- Authentication endpoints -->
<!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v1.1/">
<!ENTITY ENDPOINT-US-20 "https://identity.api.rackspacecloud.com/v2.0/">


<!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
<imageobject>
<imagedata fileref="img/Check_mark_23x20_02.svg"
format="SVG" scale="60"/>
</imageobject>
</inlinemediaobject>'>

<!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
<imageobject>
<imagedata fileref="img/Arrow_east.svg"
format="SVG" scale="60"/>
</imageobject>
</inlinemediaobject>'>
]>
<book xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:wadl="http://wadl.dev.java.net/2009/02"
  version="5.0-extension RackBook-2.0" xml:id="cbs-devguide">
  <title>Rackspace Cloud Block Storage Developer Guide</title>

  <?rax title.font.size="35px" subtitle.font.size="30px" canonical.url.base="http://docs.rackspace.com/cbs/api/v1.0/cbs-devguide/content"?>
  <info>
    <copyright>
      <year>2012</year>
      <year>2013</year>
      <year>2014</year>
      <year>2015</year>
    </copyright>
    <releaseinfo>API v1.0</releaseinfo>
    <productname>Rackspace Cloud Block Storage</productname>
    <pubdate>2015-03-04</pubdate>
    <legalnotice role="rs-api">
      <annotation>
        <remark>Copyright details are filled in by the template.
        </remark>
      </annotation>
    </legalnotice>
    <abstract>
      <para>This document is intended for software developers
        interested in developing applications using the Rackspace
        Cloud Block Storage Application Programming Interface
          (<abbrev>API</abbrev>). </para>
    </abstract>
    <revhistory>
      <revision xmlns:svg="http://www.w3.org/2000/svg" xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml">
        <date>2015-03-04</date>
        <revdescription>
          <itemizedlist spacing="compact">
            <listitem>
              <para>Removed the London endpoint, since Rackspace now has one global endpoint for
                authentication using the Rackspace Cloud Identity service. See <xref
                  linkend="Authentication-d1e647"/>.</para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision>
        <date>2015-01-14</date>
        <revdescription>
          <para>Updated <xref linkend="Authentication-d1e647"/> documentation with information about
            using multi-factor authentication for added security when a user authenticates with
            username and password credentials.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2014-12-29</date>
        <revdescription>
          <para>Added 412 for <code>invalidImage</code> to the table of faults in  <xref
              linkend="DB_faults"/>.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2014-10-09</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>Added the <code>imageRef</code> request parameter to the <link
                  xlink:href="http://docs.rackspace.com/cbs/api/v1.0/cbs-devguide/content/POST_createVolume_v1__tenant_id__volumes_volumes.html"
                  >create volume operation</link>. Use this parameter for the boot from volume
                capability. The corresponding response parameter is <code>image_id</code>.</para>
            </listitem>
            <listitem>
              <para>Updated the default quotas in <xref linkend="serviceQuotas-d1e01"/>.</para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
     <revision> 
        <date>2014-08-22</date>
        <revdescription>
          <para>Added <xref linkend="serviceQuotas-d1e01"/> to provide information about Cloud Block
            Storage quotas and how to list quota information.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2014-07-22</date>
        <revdescription xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/the key 1998/Math/MathML">
          <para>Added a link to guidance on choosing a regionalized endpoint in <xref
              linkend="Service_Access_Endpoints-d1e753"/>.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2014-06-12</date>
        <revdescription>
          <para linkend="overview">Added a reference to the <citetitle>Cloud Block Storage Getting
              Started Guide</citetitle>, which uses cURL to show example requests (<xref
              linkend="overview"/>). </para>
        </revdescription>
      </revision>
      <revision>
        <date>2013-03-12</date>
        <revdescription>
          <para>Added the version and tenant ID to URIs in <xref linkend="API_Operations"/>. </para>
        </revdescription>
      </revision>
      <revision>
        <date>2013-02-10</date>
        <revdescription>
          <para>Added <code>availability_zone</code> and <code>metadata</code> request parameter
            descriptions to the create volume operation description in <xref
              linkend="API_Operations"/>.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2013-02-06</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>Added the list volumes (detailed) operation description in <xref
                  linkend="API_Operations"/>.</para>
            </listitem>
            <listitem>
              <para>Added the list snapshots (detailed) operation description in <xref
                  linkend="API_Operations"/>. </para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision>
        <date>2014-01-28</date>
        <revdescription>
          <para>Updated the show snapshot details operation description in <xref
              linkend="API_Operations"/> to include the progress indicator,
              <code>os-extended-snapshot-attributes:progress</code>, and show it in the example
            responses. </para>
        </revdescription>
      </revision>
      <revision>
        <date>2014-01-02</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>Added the volume cloning capability that allows you to create a new Cloud Block
                Storage volume from an existing volume by adding the <code>source_volid</code>
                parameter to the create volume operation in <xref linkend="API_Operations"/>.</para>
            </listitem>
            <listitem>
              <para>Updated the instructions for locating the API key, tenant ID, and account number
                in the Cloud Control Panel in <xref linkend="Authentication-d1e647"
                  xmlns:svg="http://www.w3.org/2000/svg"
                  xmlns:m="http://www.w3.org/1998/Math/MathML"
                  xmlns:html="http://www.w3.org/1999/xhtml"/>. </para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision xmlns:svg="http://www.w3.org/2000/svg"
        xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml">
        <date>2013-10-21</date>
        <revdescription>
          <para>Added the HKG service endpoint to <xref
              linkend="Service_Access_Endpoints-d1e753"/>.</para>
        </revdescription>
      </revision>
      <revision>
        <date>2013-10-03</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>Added <xref linkend="RBAC"/>.</para>
            </listitem>
            <listitem>
              <para>Updated <xref
                  linkend="Service_Access_Endpoints-d1e753"/>.</para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision>
        <date>2013-08-09</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>Added the update volume operation in <xref linkend="API_Operations"/>.</para>
            </listitem>
            <listitem>
              <para>Updated the <code>size</code> parameter description for the create volume
                operation in <xref linkend="API_Operations"/> because the way creating a volume from
                a snapshot changed. The API for creating a volume from a snapshot was ignoring the
                size parameter and was creating a volume the same size as the snapshot. Now the
                volume size must be greater than the snapshot size. </para>
            </listitem>
            <listitem>
              <para>Updated the create snapshot operation description in <xref
                  linkend="API_Operations"/> adding information about snapshot progress. The
                progress is visible in the <code>os-extended-snapshot-attributes:progress</code>
                field of the snapshot. </para>
            </listitem>
            <!-- <listitem>
              <para>???? (This one is still "coming soon.") Updated
                Delete Snapshot description in <xref linkend="volume"
                /> adding information about  instant snapshot deletes.
                When you delete your snapshots, they will show up as
                deleted very soon after the call finishes. You can
                perform additional operations on the snapshot's volume
                without getting 409 conflicts.???? </para>
            </listitem> -->
            <listitem>
              <para>Moved the definitions of terms formally in the
                Concepts section to the <xref
                  linkend="glossary-d1e018"/> and renamed the Concepts
                section to <xref linkend="Terminology"/>.</para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision>
        <date>2013-01-04</date>
        <revdescription>
          <itemizedlist spacing="compact">
            <listitem>
              <para>Removed camel-case for JSON examples. </para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
      <revision>
        <date>2012-10-23</date>
        <revdescription>
          <itemizedlist spacing="compact">
            <listitem>
              <para>First public release.</para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
    </revhistory>
    <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
      <raxm:displayname>API Developer Guide</raxm:displayname>
      <raxm:product version="v1.0">cbs</raxm:product>
      <raxm:priority>20</raxm:priority>
    </raxm:metadata>
  </info>
  <chapter xml:id="overview" xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xmlns:html="http://www.w3.org/1999/xhtml">
    <title>Overview</title>
    <para>Rackspace Cloud Block Storage is a block level storage solution that allows customers to
      mount drives or volumes to their Rackspace Next Generation Cloud Servers<trademark/>. The
      primary use cases for Cloud Block Storage are to allow you to perform the following tasks:<itemizedlist>
        <listitem>
          <para>Scale your storage independently from your compute resources.</para>
        </listitem>
        <listitem>
          <para>Use high performance storage to serve database or I/O-intensive applications.</para>
        </listitem>
      </itemizedlist></para>
    <para>Interactions with Cloud Block Storage occur programmatically via the Cloud Block Storage
      API as described in this developer guide. Cloud Block Storage uses a RESTful (Representational
      State Transfer) web services interface. Rackspace also provides language-specific SDKs in
      several popular programming languages. For more information, see the <link
        xlink:href="http://developer.rackspace.com/#home-sdks"
        xmlns:m="http://www.w3.org/the key 1998/Math/MathML"><citetitle>Official SDKs and
          Tools</citetitle></link>.</para>
    <para>Rackspace offers both a low cost/gigabyte (GB) option with
      standard performance for customers who only require more storage
      and a high performance option that provides increased storage
      with higher performance (at a higher cost/GB). </para>
    <para>Highlights of Rackspace Cloud Block Storage include:<itemizedlist>
        <listitem>
          <para>Mount a drive to a Cloud Server to scale storage
            without paying for more compute capability.</para>
        </listitem>
        <listitem>
          <para>A high performance option for databases and high performance applications,
            leveraging solid state drives (SSDs) for speed.</para>
        </listitem>
        <listitem>
          <para>A standard speed option using SATA drive for customers who just need additional
            storage on their Cloud Server.</para>
        </listitem>
        <listitem>
          <para>Two simple price options:</para>
          <itemizedlist>
            <listitem>
              <para>Lower cost per GB for standard performance and
                additional storage.</para>
            </listitem>
            <listitem>
              <para>Higher cost per GB for high performance and
                additional storage.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </para>
    <note>
      <title>Notes</title>
      <itemizedlist>
        <listitem>
          <para>Cloud Block Storage is an add-on feature to Next
            Generation Cloud Servers. Customers may not attach Cloud
            Block Storage volumes to other instances, like first
            generation Cloud Servers.</para>
        </listitem>
        <listitem>
          <para>Cloud Block Storage is multi-tenant rather than
            dedicated.</para>
        </listitem>
        <listitem>
          <para>When volumes are destroyed, Rackspace keeps that disk
            space unavailable until zeros have been written to the
            space to ensure that data is not accessible by any other
            customers.</para>
        </listitem>
        <listitem>
          <para>Cloud Block Storage allows you to create snapshots
            that you can save, list, and restore.</para>
        </listitem>
      </itemizedlist>
    </note>
    <para>Cloud Block Storage is built on the OpenStack Cinder project. For more information about
      OpenStack Cinder, see the <link
        xlink:href="http://docs.openstack.org/api/openstack-block-storage/1.0/content/">OpenStack
        Block Storage API v1 Reference</link>.</para>
    <para>You can find additional details about Cloud Block Storage in the <emphasis role="italic"
        >Cloud Block Storage Getting Started Guide</emphasis> at <link
        xlink:href="http://docs.rackspace.com/">docs.rackspace.com</link>. This guide provides
      step-by-step instructions to enter the necessary URLs or commands to use the Cloud Block
      Storage API.</para>
    <para xmlns:m="http://www.w3.org/the key 1998/Math/MathML">For more details about the Cloud
      Block Storage service, see the Cloud Block Storage page at <link
        xlink:href="http://www.rackspace.com/cloud/block-storage/">www.rackspace.com</link> and the
      Knowledge Center article <link
        xlink:href="http://www.rackspace.com//knowledge_center/article/cloud-block-storage-overview"
        >Cloud Block Storage Overview</link>. </para>
    <para xmlns:m="http://www.w3.org/the key 1998/Math/MathML">Rackspace welcomes feedback,
      comments, and bug reports at <link xlink:href="mailto:support@rackspacecloud.com"
        >support@rackspacecloud.com</link>. </para>

<!-- 
    <para security="writeronly">The following figure shows an overview
      of Cloud Block Storage: <informalfigure>
        <mediaobject>
          <imageobject role="fo">
            <imagedata fileref="images/CBS_HighLevelOverview.svg"
              contentwidth="6in"/>
          </imageobject>
          <imageobject role="html">
            <imagedata fileref="figures/CBS_HighLevelOverview.png"/>
          </imageobject>
        </mediaobject>
      </informalfigure>
    </para>
    <remark security="reviewer">Writer: need to get architecture diagram for CBS and
      include it above. Ask Megan to provide.</remark>
-->
    
    <?hard-pagebreak?>   
    <section xml:id="Intended_Audience-d1e122">
      <title>Intended audience</title>
      <para>This document is intended for software developers who are interested in developing
        applications that use the Rackspace Cloud Block Storage API. It assumes that you have the
        following skills: </para>
      <itemizedlist spacing="compact">
        <listitem>
          <para>RESTful web services</para>
        </listitem>
        <listitem>
          <para>HTTP/1.1 conventions</para>
        </listitem>
        <listitem>
          <para>JSON or XML data serialization formats</para>
        </listitem>
      </itemizedlist>
    </section>
    <?hard-pagebreak?>
    <section xml:id="Document_Change_History-d1e166">
      <title>Document change history</title>
      <para>This version of the developer guide replaces and obsoletes all earlier versions. The
        most recent changes are described in the following table:</para>
      <?rax revhistory?>
    </section>
    <?hard-pagebreak?> 
    <section xml:id="Additional_Resources-d1e532">
      <title>Additional resources</title>
      <para>You can download the most current versions of the
        API-related documents from <link
          xlink:href="http://docs.rackspace.com/"
          >docs.rackspace.com</link>. </para>
      <para>For information about Rackspace Cloud products, refer to <link
          xlink:href="http://www.rackspace.com/cloud/">www.rackspace.com</link>. This site also
        offers links to the Rackspace official support channels, including knowledge base articles,
        forums, phone, chat, and email. </para>
      <para>You can follow Rackspace updates and announcements via <link
          xlink:href="http://www.twitter.com/rackspace">Twitter</link>. </para>
      <para>This API uses standard HTTP 1.1 response codes as documented at <link
          xlink:href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP Status Code
          Definitions</link>. </para>
    </section>
    <section xml:id="API_Contract_Changes-d1e363">
      <title>API contract changes</title>
      <para>Rackspace will notify customers in release notes when and if the contract does
        change.</para>
    </section>
    <section xml:id="Pricing_SLA-d1e1362">
      <title>Pricing and service level</title>
      <para>Cloud Block Storage is part of the Rackspace Cloud and your use of Cloud Block Storage
        is billed according to the pricing schedule on the Cloud Block Storage page at <link
          xlink:href="http://www.rackspace.com/cloud/block-storage/">www.rackspace.com</link>.</para>
      <para>The Service Level Agreement (SLA) for Cloud Block Storage is available on the <link
          xlink:href="http://www.rackspace.com/information/legal/cloud/sla?page=blockstorage#cloud_block_storage_sla"
          >Rackspace Legal Information</link> page.</para>
    </section>
    <section xml:id="Terminology">
      <title>Terminology</title>
      <?dbhtml stop-chunking?>
      <para>To use the Cloud Block Storage API effectively, you should
        understand the terms defined in the <xref
          linkend="glossary-d1e018"/>.</para>

    </section>
  </chapter>

  <chapter xml:id="General_API_Information-d1e633"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xmlns:html="http://www.w3.org/1999/xhtml">
    <title>General API information</title>
    <para>The Cloud Block Storage API is implemented using a RESTful
      web service interface. Like other products in the Rackspace
      Cloud suite, Cloud Block Storage shares a common token-based
      authentication system that allows seamless access between
      products and services. </para>
    <note>
      <para> All requests to authenticate against and operate the
        service are performed using SSL over HTTP (HTTPS) on TCP port
        443. </para>
    </note>
    <section xml:id="Authentication-d1e647">
      <title>Authentication</title>
      <para> Every REST request against the Block Storage Service
        requires the inclusion of a specific authorization token,
        supplied by the <code>X-Auth-Token</code> HTTP header.
        Customers obtain this token by first using the Rackspace Cloud
        Authentication Service and supplying a valid username and API
        access key. </para>
      <para> To authenticate, submit a <code>POST/v2.0/tokens</code>
        request, presenting valid Rackspace customer credentials in
        the message body to a Rackspace authentication endpoint. </para>
      <para>
        <emphasis role="bold">GET YOUR CREDENTIALS</emphasis>
      </para>
      <para> You can use either of two sets of credentials: <itemizedlist>
          <listitem>
            <para>your <code>username</code> and
              <code>password</code></para>
          </listitem>
          <listitem>
            <para>your <code>username</code> and <code>API
              key</code></para>
          </listitem>
        </itemizedlist>
      </para>
      <para>Your <code>username</code> and <code>password</code> are
        the ones you use to login to the Rackspace Cloud Control
        Panel. Once you are logged in, you can use the Cloud Control
        Panel to obtain your <code>API key</code>. </para>
      <note>
        <para>If you authenticate with username and password credentials, you can use multi-factor
          authentication to add an additional level of account security. This feature is not
          implemented for username and API credentials. For more information, see <link
            xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/MFA_Ops.html"
            >Multi-factor authentication</link> in the <citetitle>Cloud Identity Client Developer
            Guide</citetitle>. </para>
      </note>
      <para><emphasis role="bold">To find your API key:</emphasis>
      </para>
      <orderedlist>
        <listitem>
          <para>Log in to the Cloud Control Panel (<link
              xlink:href="https://mycloud.rackspace.com"
              >mycloud.rackspace.com</link>).</para>
        </listitem>
        <listitem>
          <para>On the upper-right side of the top navigation pane,
            click your username.</para>
        </listitem>
        <listitem>
          <para>From the menu, select <guilabel>Account
              Settings</guilabel>.</para>
        </listitem>
        <listitem>
          <para>In the Login Details section of the Account Settings
            page, locate the <guilabel>API Key</guilabel> field and
            click <guibutton>Show</guibutton>.</para>
        </listitem>
        <listitem>
          <para>Copy the value of the API Key and paste it into a text
            editor of your choice.</para>
        </listitem>
        <listitem>
          <para>Click <guibutton>Hide</guibutton> to hide the value of
            the API Key.</para>
        </listitem>
      </orderedlist>
      <para>You also need your cloud account number. In the
        documentation, the account number is often referred to as your
        tenant name or tenant ID (technically, the ID is different
        from the name, but at Rackspace, they are the same thing).
        Together, three components—your username, your API Key, and
        your tenant ID or cloud account number—form the authentication
        credentials that are required to connect to the Rackspace
        cloud.</para>
      <para>To find your tenant ID or cloud account number, locate your username on the upper-right
        side of the top navigation pane in the Cloud Control Panel. The tenant ID or account number
        is in the drop down menu under your username. </para>
      <para> Your account may be based in either the US or the UK. This is not determined by your
        physical location but by the location of the Rackspace retail site that was used to create
        your account. </para>
      <itemizedlist spacing="compact">
        <listitem>
          <para> If your account was created via <link
              xlink:href="http://www.rackspacecloud.com"
              >http://www.rackspacecloud.com</link>, it is a US-based
            account. </para>
        </listitem>
        <listitem>
          <para> If your account was created via <link
              xlink:href="http://www.rackspace.co.uk"
              >http://www.rackspace.co.uk</link>, it is a UK-based
            account. </para>
        </listitem>
      </itemizedlist>
      <para>
        <emphasis role="bold">SEND YOUR CREDENTIALS TO YOUR
          AUTHENTICATION ENDPOINT</emphasis>
      </para>
      <para>Use the following endpoint to access the Cloud Identity service for authentication,
        regardless of US or UK identities: </para>
      <itemizedlist spacing="compact">
        <listitem>
          <para><link xlink:href="&ENDPOINT-US-20;">&ENDPOINT-US-20;</link>
          </para>
        </listitem>
      </itemizedlist>
      <para>With your credentials and the authentication endpoint, you issue a <code>POST
          /v2.0/tokens</code> request in an API call, you have all the basic information you need to
        use the Rackspace Cloud Identity Service. </para>
      <para> You can use <link xlink:href="http://curl.haxx.se/">cURL</link> to try the
        authentication process in two steps: <orderedlist>
          <listitem>
            <para><emphasis role="bold">Get an authentication token by providing your username and
                either your API key or your password.</emphasis>
            </para>
            <para>Here are examples of both approaches.</para>
            <para><emphasis>You can request a token by providing your username and your API
                key.</emphasis></para>
            <para>
              <literallayout class="monospaced">curl -X POST https://auth.api.rackspacecloud.com/v2.0/tokens -d 
'{ "auth":{ "RAX-KSKEY:apiKeyCredentials":{ "username":"yourUserName", "apiKey":"yourApiKey" } } }' -H "Content-type: application/json"</literallayout>
            </para>
            <para><emphasis>You can request a token by providing your username and your
                password.</emphasis></para>
            <para>
              <literallayout class="monospaced">curl -X POST https://auth.api.rackspacecloud.com/v2.0/tokens -d
'{"auth":{"passwordCredentials":{"username":"yourUserName","password":"yourPassword"}}}' -H "Content-type: application/json"</literallayout>
            </para>
          </listitem>
          <listitem>
            <para>Review the authentication response.
              <itemizedlist>
                <listitem>
                  <para>Successful authentication returns a token that you can use as evidence that your
                    identity has already been authenticated along with a service catalog, which lists the
                    endpoints that you can use for Rackspace Cloud services. To use the token, pass it to
                    other services as an <code>X-Auth-Token</code> header.</para>
                </listitem>
                <listitem>
                  <para>If the Identity service returns a returns a 401 message with a request for
                    additional credentials, your account requires <link
                      xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-admin-devguide/content/MFA_Ops.htmlmulti-factor authentication"
                      >multi-factor authentication</link>. To complete the authentication process,
                    submit a second <guilabel>POST tokens</guilabel> request with these multi-factor
                    authentication credentials: <itemizedlist>
                      <listitem>
                        <para>The session ID value returned in the <code>WWW-Authenticate: OS-MF
                          sessionId</code> header parameter that is included in the response to
                          the initial authentication request.</para>
                      </listitem>
                      <listitem>
                        <para>The passcode from the mobile phone associated with your user
                          account.</para>
                        <example>
                          <title>Authentication request with multi-factor authentication
                            credentials</title>
                          <programlisting language="bash" role="gutter: false"><?db-font-size 60%?><prompt>$</prompt>curl https://identity.api.rackspacecloud.com/v2.0/tokens \
     -X POST \
     -d '{"auth": {"RAX-AUTH:passcodeCredentials": {"passcode":"1411594"}}}'\
     -H "X-SessionId: $SESSION_ID" \
     -H "Content-Type: application/json" --verbose | python -m json.tool</programlisting>
                        </example>
                      </listitem>
                    </itemizedlist></para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Use the authentication token to send a GET to a service you
                would like to use.</emphasis>
            </para>
            <para>Here is an example of passing an authentication token to the Cloud Files service,
              using the Cloud Files service catalog endpoint that was returned along with the
              token.</para>
            <para><emphasis>You can use a token and a service endpoint to tell a service that your
                credentials are valid.</emphasis></para>
            <para>
              <literallayout class="monospaced">curl -X GET https://storage101.dfw1.clouddrive.com/v1/MossoCloudFS_aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee
-H 'X-Auth-Token:11111111-aaaa-2222-bbbb-3333cccc4444' --verbose</literallayout>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <tip>
        <para> For links to language binding examples you can adapt to work with the Cloud Identity
          service, visit <link xlink:href="https://developer.rackspace.com/sdks/">SDKs &amp;
          Tools</link>.</para>
      </tip>

      <para>Authentication tokens are typically valid for 24 hours.
        Applications should be designed to re-authenticate after
        receiving a 401 (Unauthorized) response from a service
        endpoint. </para>
      <important>
        <para>If you are programmatically parsing an authentication response, please be aware that
          service names are stable for the life of the particular service and can be used as keys.
          You should also be aware that a user's service catalog can include multiple uniquely-named
          services which perform similar functions. For example, cloudServersOpenStack is the
          OpenStack version of compute whereas cloudServers is the legacy version of compute. The
          same user can have access to both services. In Auth 2.0, the service type attribute can be
          used as a key by which to recognize similar services. For more information, see the tip
          below.</para>
      </important>
      <tip>
        <para>Beginning with Auth 2.0, the service catalog includes a service type attribute to
          identify services that perform similar functions but have different names. For example,
            <code>type="compute"</code> identifies compute services such as cloudServers and
          cloudServersOpenStack. Some developers have found the service type attribute to be useful
          in parsing the service catalog. For the Cloud Identity 2.0 service for authentication, you
          can see the service type attribute in the <link
            xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/Sample_Request_Response-d1e64.html"
            >Sample Authentication Request and Response examples</link> in the <citetitle>Cloud
            Identity Client Developer Guide</citetitle>.</para>
      </tip>
    </section>
<?hard-pagebreak?> 
    <section xml:id="RBAC">
      <title>Role Based Access Control</title>
      <para>Role Based Access Control (RBAC) restricts access to the
        capabilities of Rackspace Cloud services, including the Cloud
        Block Storage API, to authorized users only. RBAC enables
        Rackspace Cloud customers to specify which account users of
        their Cloud account have access to which Cloud Block Storage
        API service capabilities, based on roles defined by Rackspace
        (see <xref linkend="RBAC_product_roles_table"/>). The
        permissions to perform certain operations in Cloud Block
        Storage API – create, read, update, delete – are assigned to
        specific roles, and these roles can be assigned by the Cloud
        account admin user to account users of the account. </para>
      <section xml:id="Assigning-Roles-d1e001">
        <title>Assigning roles to account users</title>
        <para>The account owner (identity:user-admin) can create
          account users on the account and then assign roles to those
          users. The roles grant the account users specific
          permissions for accessing the capabilities of the Cloud
          Block Storage service. Each account has only one account
          owner, and that role is assigned by default to any Rackspace
          Cloud account when the account is created.</para>
        <para>See the <citetitle>Cloud Identity Client Developer
            Guide</citetitle> for information about how to perform the
          following tasks:</para>
        <itemizedlist spacing="compact">
          <listitem>
            <para><link
              xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_addUser__v2.0_users_User_Calls.html"
              >Create account users</link></para>
          </listitem>
          <listitem>
            <para><link
              xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/PUT_addUserRole__v2.0_users__userId__roles_OS-KSADM__roleid__Role_Calls.html"
              >Assign roles to account users</link></para>
          </listitem>
          <listitem>
            <para><link
              xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/DELETE_deleteUserRole__v2.0_users__userId__roles_OS-KSADM__roleid__Role_Calls.html"                            
              >Delete roles from account users</link></para>
          </listitem>
        </itemizedlist>
        <note>
          <para>The account admin user (identity:user-admin) role
            cannot hold any additional roles because it already has
            full access to all capabilities by default.</para>
        </note>
      </section>
      <section xml:id="RBAC_product_roles">
        <title>Roles available for Cloud Block Storage </title>
        <para>Three roles (admin, creator, and observer) can be used
          to access the Cloud Block Storage API specifically. The
          following table describes these roles and their
          permissions.</para>
        <table xml:id="RBAC_product_roles_table" rules="all">
          <caption>Cloud Block Storage product roles and capabilities</caption>
          <col width="50%"/>
          <col width="50%"/>
          <thead>
            <tr>
              <th>Role name</th>
              <th>Role permissions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>cbs:admin</td>
              <td>This role provides Create, Read, Update, and Delete
                permissions in Cloud Block Storage, where access is
                granted.</td>
            </tr>
            <tr>
              <td>cbs:creator</td>
              <td>This role provides Create, Read and Update
                permissions in Cloud Block Storage, where access is
                granted.</td>
            </tr>
            <tr>
              <td>cbs:observer</td>
              <td>This role provides Read permission in Cloud Block
                Storage, where access is granted.</td>
            </tr>
          </tbody>
        </table>
        <para>Additionally, two multiproduct roles apply to all
          products. Users with multiproduct roles inherit access to
          future products when those products become RBAC-enabled. The
          following table describes these roles and their
          permissions.</para>
        <table rules="all">
          <caption> Multiproduct (global) roles and permissions</caption>
          <col width="50%"/>
          <col width="50%"/>
          <thead>
            <tr>
              <th>Role name</th>
              <th>Role permissions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>admin</td>
              <td>This role provides Create, Read, Update, and Delete
                permissions in all products, where access is
                granted.</td>
            </tr>
            <tr>
              <td>observer</td>
              <td>This role provides Read permission in all products,
                where access is granted.</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section xml:id="RBAC-Resolving-Conflicts-d1e001" version="5.0">
        <title>Resolving conflicts between RBAC multiproduct vs. custom (product-specific)
          roles</title>
        <para>The account owner can set roles for both multiproduct
          and Cloud Block Storage scope, and it is important to
          understand how any potential conflicts among these roles are
          resolved. When two roles appear to conflict, the role that
          provides the more extensive permissions takes precedence.
          Therefore, admin roles take precedence over observer and
          creator roles, because admin roles provide more permissions. </para>
        <para>The following table shows two examples of how potential conflicts between user roles
          in the Control Panel are resolved. </para>
        <para>
          <informaltable rules="all">
            <thead>
              <tr align="center">
                <td>Permission configuration</td>
                <td>View of permission in the Control Panel </td>
                <td>Can the user perform product admin functions in the Control Panel?</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>User is assigned the following roles: multiproduct
                    <emphasis role="bold">observer</emphasis> and
                  Cloud Block Storage <emphasis role="bold"
                    >admin</emphasis></td>
                <td>Appears that the user has only the multiproduct
                    <emphasis role="bold">observer</emphasis>
                  role</td>
                <td>Yes, for Cloud Block Storage only. The user has
                  the <emphasis role="bold">observer</emphasis> role
                  for the rest of the products.</td>
              </tr>
              <tr>
                <td>User is assigned the following roles: multiproduct
                    <emphasis role="bold">admin</emphasis> and Cloud
                  Block Storage <emphasis role="bold"
                    >observer</emphasis></td>
                <td>Appears that the user has only the multiproduct
                    <emphasis role="bold">admin</emphasis> role</td>
                <td>Yes, for all of the products. The Cloud Block
                  Storage <emphasis role="bold">observer</emphasis>
                  role is ignored.</td>
              </tr>
            </tbody>
          </informaltable>
        </para>
      </section>
      <section xml:id="RBAC-Permissions-Cross-Ref-d1e001"
        version="5.0">
        <title>RBAC permissions cross-reference to Cloud Block Storage API operations</title>
        <para>API operations for Cloud Block Storage may or may not be
          available to all roles. To see which operations are
          permitted to invoke which calls, please review the <link
            xlink:href="http://www.rackspace.com/knowledge_center/article/permissions-matrix-for-role-based-access-control-rbac"
            >Knowledge Center article</link>.</para>
      </section>
    </section>
    <section xml:id="Service_Access_Endpoints-d1e753">
      <title>Service access endpoints</title>
      <para>The Cloud Block Storage service is a regionalized service.
        The user of the service is therefore responsible for
        appropriate replication, caching, and overall maintenance of
        Cloud Block Storage data across regional boundaries to other
        Cloud Block Storage servers.</para>

        <para>To help you decide which regionalized endpoint to use, read the Knowledge Center
          article about special considerations for choosing a data center at <link
            xlink:href="http://www.rackspace.com/knowledge_center/article/about-regions">About
            Regions</link>. </para>
       
      <para>You can find the available service access/endpoints for Cloud Block Storage summarized
        in the table below.</para>
      <?rax-fo keep-with-next?>
      <para>
        <table rules="all">
          <caption>Regionalized service endpoints</caption>
          <thead>
            <tr align="center">
              <td colspan="2">Region</td>
              <td colspan="5">Endpoint</td>
            </tr>
          </thead>
          <tbody>
            <tr align="left">
              <td colspan="2">Chicago (ORD)</td>
              <td colspan="5"
                  ><code>https://ord.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/
              </td>
            </tr>
            <tr>
              <td colspan="2">Dallas/Ft. Worth (DFW)</td>
              <td colspan="5"
                  ><code>https://dfw.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/</td>
            </tr>
            <tr>
              <td colspan="2">Northern Virginia (IAD)</td>
              <td colspan="5"
                  ><code>https://iad.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/</td>
            </tr>
            <tr align="left">
              <td colspan="2">London (LON)</td>
              <td colspan="5"
                  ><code>https://lon.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/
              </td>
            </tr>
            <tr>
              <td colspan="2">Sydney (SYD)</td>
              <td colspan="5"
                  ><code>https://syd.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/</td>
            </tr>
            <tr>
              <td colspan="2">Hong Kong (HKG)</td>
              <td colspan="5"
                  ><code>https://hkg.blockstorage.api.rackspacecloud.com/v1/</code><parameter>1234</parameter>/</td>
            </tr>
          </tbody>
        </table>
      </para>
      <para>Replace the sample account ID number,
          <parameter>1234</parameter>, with your actual account number
        returned as part of the authentication service
        response.</para>
      <para>You will find the actual account number after the final
        '/' in the <code>publicURL</code> field returned by the
        authentication response.</para>
    </section>
    <section xml:id="DB_service_versions">
      <title>Cloud Block Storage service versions</title>
      <para>The Cloud Block Storage version defines the contract and
        build information for the API. </para>
      <section xml:id="Contract_Version-d1e825">
        <title>Contract version</title>
        <para>The contract version denotes the data model and behavior that the API supports. The
          requested contract version is included in all request URLs. Different contract versions of
          the API may be available at any given time and are not guaranteed to be compatible with
          one another. </para>
        <example>
          <title>Example request URL (contract version in <emphasis role="strong"
            >bold</emphasis>)</title>
          <programlisting>https://dfw.blockstorage.api.rackspacecloud.com/<emphasis role="bold">v1</emphasis>/1234/</programlisting>
        </example>
        <note>
          <para>This document pertains to contract v1.</para>
        </note>
      </section>
    </section>
    <?hard-pagebreak?>      
    <section xml:id="Request_Response_Types-d1e903">
      <title>Request and response types</title>
      <para>The Cloud Block Storage API supports both the JSON and XML
        data serialization formats. The request format is specified
        using the <code>Content-Type</code> header and is required for
        calls that have a request body. The response format can be
        specified in requests either by using the <code>Accept</code>
        header or by adding an <code>.xml</code> or <code>.json</code>
        extension to the request URI. Note that it is possible for a
        response to be serialized using a format different from the
        request. If no response format is specified, JSON is the
        default. If conflicting formats are specified using both an
          <code>Accept</code> header and a query extension, the query
        extension takes precedence.</para>

      <table rules="all">
        <caption>Response formats</caption>
        <?dbfo keep-together="always"?>
        <thead>
          <tr align="center">
            <td>Format</td>
            <td>Accept header</td>
            <td>Query extension</td>
            <td>Default</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>JSON</td>
            <td>application/json</td>
            <td>.json</td>
            <td>Yes</td>
          </tr>
          <tr>
            <td>XML</td>
            <td>application/xml</td>
            <td>.xml</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>

      <para>In the request example below, notice that <parameter>Content-Type</parameter> is set to
          <parameter>application/json</parameter>, but <parameter>application/xml</parameter> is
        requested via the <parameter>Accept</parameter> header.</para>

      <example>
        <title>Request with headers (listing volume types)</title>
        <programlisting> GET /v1/441446/types HTTP/1.1
 Host: dfw.blockstorage.api.rackspacecloud.com
 X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
 Content-Type: application/json
 Accept: application/xml</programlisting>
      </example>

      <para><?rax-fo keep-with-next?>An XML response format is returned.</para>

      <example>
        <title>XML response with headers</title>
        <programlisting>  HTTP/1.1 200 OK
  Date: Fri, 20 Jul 2012 20:32:13 GMT
  Content-Length: 187
  Content-Type: application/xml
  X-Compute-Request-Id: req-8e0295cd-a283-46e4-96da-cae05cbfd1c7
  
  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;volume_types&gt;
      &lt;volume_type id="1" name="SATA"&gt;
          &lt;extra_specs/&gt;
      &lt;/volume_type&gt;
      &lt;volume_type id="2" name="SSD"&gt;
          &lt;extra_specs/&gt;
      &lt;/volume_type&gt;
  &lt;/volume_types&gt;
</programlisting>
      </example>

    </section>
    <?hard-pagebreak?>
      <section xml:id="Absolute_Limits-d1e1397">
        <title>Absolute limits</title>
        <para>All accounts, by default, have a preconfigured set of thresholds (or limits) to manage
          capacity and prevent abuse of the system. Absolute limits are fixed. </para>

        <para>Refer to the following table for the absolute limits
          that are set.</para>
        <table rules="all">
          <caption>Absolute limits</caption>
          <col width="120pt"/>
          <col width="201pt"/>
          <col width="50pt"/>
          <thead>
            <tr>
              <td colspan="1">Name</td>
              <td colspan="1">Description</td>
              <td colspan="1">Limit</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="1">Standard Performance Storage</td>
              <td colspan="1">Maximum amount of <emphasis role="bold">
                  standard performance</emphasis> storage per region
                for applications that just need additional storage on
                their Cloud Server. </td>
              <td colspan="1">10 TB or 50 volumes</td>
            </tr>
            <tr>
              <td colspan="1">High Performance Storage</td>
              <td colspan="1">Maximum amount of <emphasis role="bold">
                  High performance</emphasis> storage per region for
                databases and high performance applications leveraging
                  <emphasis role="bold">solid state drives</emphasis>
                for speed and performance. </td>
              <td colspan="1">10 TB or 50 volumes</td>
            </tr>
          </tbody>
        </table>
      </section>
    <section xml:id="serviceQuotas-d1e01">
      <title>Cloud Block Storage quotas</title>
      <para>All new Cloud Block Storage users are assigned default quotas that limit the amount of
        block storage that can be provisioned in each region. Default quotas enable users to
        provision up to 10 TB of SATA and 10 TB of SSD and are primarily used to help with capacity
        planning and to prevent system abuse. If your application requires more storage or volumes
        than the default quotas, simply submit a support request to ask for an increase. In your
        request, be sure to include the following information:<itemizedlist>
          <listitem>
            <para>Total storage amount that you need (in GBs or TBs)</para>
          </listitem>
          <listitem>
            <para>Storage type (SATA or SSD)</para>
          </listitem>
          <listitem>
            <para>Region (for example, DFW or LON)</para>
          </listitem>
        </itemizedlist></para>
      <note>
        <para>Cloud Block Storage quotas are independent from any other account quotas that you
          might have. In addition, Cloud Block Storage no longer supports account quotas (previously
          shared by SATA and SSD) or number-of-volumes quotas. Both of these quotas were replaced by
          the storage-type quotas, which are specific to SATA and SSD per account per region.</para>
      </note>
      <para>You can use the OpenStack Cinder client or API to see your current block storage quota
        and your current utilization against it. </para>
      <para>For Cinder client users, use the following
        command:<programlisting>$ cinder quota-usage <emphasis role="bold">yourAccountID</emphasis></programlisting>
      </para>
      <note>
        <para>Your account ID or account number is often referred to as your tenant ID or tenant
          name. For information about how to find your account ID, see <xref
            linkend="Authentication-d1e647"/>.</para>
      </note>
      <para>This results in a quota listing similar to the following example.</para>
      <example>
          <title>Response showing quota and usage information</title>
          <programlisting> +----------------+--------+----------+-------+
 |      Type      | In_use | Reserved | Limit |
 +----------------+--------+----------+-------+
 |   gigabytes    |  100   |    0     |   -1  |
 | gigabytes_SATA |  100   |    0     | 10240 |
 | gigabytes_SSD  |   0    |    0     | 10240 |
 |   snapshots    |  12    |    0     |   -1  |
 | snapshots_SATA |   1    |    0     |   -1  |
 | snapshots_SSD  |   0    |    0     |   -1  |
 |    volumes     |   1    |    0     |   -1  |
 |  volumes_SATA  |   1    |    0     |   -1  |
 |  volumes_SSD   |   0    |    0     |   -1  |
 +----------------+--------+----------+-------+</programlisting>
        </example> 
      <para>The following table describes the information in the quota listing.</para>
      <table rules="all">
        <caption>Cloud Block Storage quota properties</caption>
        <col width="25%"/>
        <col width="75%"/>
        <thead>
          <tr>
            <td colspan="1">Property name</td>
            <td colspan="1">Value description</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="1">gigabytes</td>
            <td colspan="1">Volume gigabytes allowed for each tenant. Gigabytes for SATA and SSD are
              given.</td>
          </tr>
          <tr>
            <td colspan="1">snapshots</td>
            <td colspan="1">Volume snapshots allowed for each tenant. Snapshots for SATA and SSD are
              given. </td>
          </tr>
          <tr>
            <td colspan="1">volumes</td>
            <td colspan="1">Volumes allowed for each tenant. Volumes for SATA and SSD are given.
            </td>
          </tr>
        </tbody>
      </table>
      <para>To use the Cinder API, you can use a cURL request similar to the following example to
        see your current block storage quota and your current activity against it. If you use the
          <code>usage=True</code> query parameter, the response includes the usage information. If
        you do not include the query parameter, the response includes only quota information. </para>
      <example>
        <title>cURL request to show quota and usage information</title>
        <programlisting language="bash">curl -i -X GET https://dfw.blockstorage.api.rackspacecloud.com/v1/<emphasis role="bold">yourAccountID</emphasis>/os-quota-sets/<emphasis role="bold">yourAccountID</emphasis>?usage=True \
-H "X-Auth-Project-Id: <emphasis role="bold">yourAccountID</emphasis>" \
-H "User-Agent: python-cinderclient" \
-H "Accept: application/json" \
-H "X-Auth-Token: <emphasis role="bold">yourAuthToken</emphasis>"</programlisting>
      </example>
      <example>
        <title>Response from the cURL request to show quota and usage information</title>
        <programlisting>
{
    "quota_set": {
        "gigabytes": {
            "in_use": 100,
            "limit": -1,
            "reserved": 0
        },
        "gigabytes_SATA": {
            "in_use": 100,
            "limit": 10240,
            "reserved": 0
        },
        "gigabytes_SSD": {
            "in_use": 0,
            "limit": 10240,
            "reserved": 0
        },
        "id": "yourAccountID",
        "snapshots": {
            "in_use": 12,
            "limit": -1,
            "reserved": 0
        },
        "snapshots_SATA": {
            "in_use": 1,
            "limit": -1,
            "reserved": 0
        },
        "snapshots_SSD": {
            "in_use": 0,
            "limit": -1,
            "reserved": 0
        },
        "volumes": {
            "in_use": 1,
            "limit": -1,
            "reserved": 0
        },
        "volumes_SATA": {
            "in_use": 1,
            "limit": -1,
            "reserved": 0
        },
        "volumes_SSD": {
            "in_use": 0,
            "limit": -1,
            "reserved": 0
        }
    }
}
</programlisting>
      </example>
    </section>

    <section xml:id="datetimeformat">
      <title>Date and time format</title>
      <para>The Cloud Block Storage service uses an ISO-8601 compliant
        date format for the display and consumption of date/time
        values. </para>
      <example>
        <title>Service date and time format</title>
        <programlisting>yyyy-MM-dd'T'HH:mm:ss.SSSZ</programlisting>
        <para>May 19th, 2011 at 8:07:08 AM, GMT-5 would have the
          following format:</para>
        <programlisting>2011-05-19T08:07:08-05:00</programlisting>
      </example>
      <para>The following table describes the date time format codes.</para>
      <table rules="all">
        <caption>Explanation of date and time format codes</caption>
        <thead>
          <tr>
            <td>Code</td>
            <td>Description</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>yyyy</td>
            <td>Four digit year</td>
          </tr>
          <tr>
            <td>MM</td>
            <td>Two digit month</td>
          </tr>
          <tr>
            <td>dd</td>
            <td>Two digit day of month</td>
          </tr>
          <tr>
            <td>T</td>
            <td>Separator for date/time</td>
          </tr>
          <tr>
            <td>HH</td>
            <td>Two digit hour of day (00-23)</td>
          </tr>
          <tr>
            <td>mm</td>
            <td>Two digit minutes of hour</td>
          </tr>
          <tr>
            <td>ss</td>
            <td>Two digit seconds of the minute</td>
          </tr>
          <tr>
            <td>SSS</td>
            <td>Three digit milliseconds of the second</td>
          </tr>
          <tr>
            <td>Z</td>
            <td>RFC-822 timezone</td>
          </tr>
        </tbody>
      </table>
    </section>
    <?hard-pagebreak?>   
    <section xml:id="DB_faults">
      <title>Faults</title>
      <para>When an error occurs, the Cloud Block Storage service returns a fault object containing
        an HTTP error response code that denotes the type of error. The response body returns
        additional information about the fault. </para>
      <para>The following table lists possible fault types with their
        associated error codes and descriptions.</para>
      <table rules="all">
        <caption>Faults</caption>
        <col width="35%"/>
        <col width="25%"/>
        <col width="40%"/>
        <thead>
          <tr>
            <th>Fault type</th>
            <th>Associated error code</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>badRequest</code></td>
            <td>400</td>
            <td>There was one or more errors in the user request.</td>
          </tr>
          <tr>
            <td><code>unauthorized</code></td>
            <td>401</td>
            <td>The supplied token is not authorized to access the resources, either it's expired or
              invalid.</td>
          </tr>
          <tr>
            <td><code>forbidden</code></td>
            <td>403</td>
            <td>Access to the requested resource was denied.</td>
          </tr>
          <tr>
            <td><code>itemNotFound</code></td>
            <td>404</td>
            <td>The back-end services did not find anything matching the Request-URI.</td>
          </tr>
          <tr>
            <td><code>badMethod</code></td>
            <td>405</td>
            <td>The requested method is not allowed for this resource.</td>
          </tr>
          <tr>
            <td>
              <code>invalidImage</code></td>
            <td>412</td>
            <td>This fault is related to creating volumes for the boot from volume feature. The
              uncompressed image size must be 127 GB or less.</td>
          </tr>
          <tr>
            <td><code>overLimit</code></td>
            <td>413</td>
            <td>Either the number of entities in the request is larger than allowed limits, or the
              user has exceeded allowable request rate limits. See the <code>details</code> element
              for more specifics. Contact support if you think you need higher request rate
              limits.</td>
          </tr>
          <tr>
            <td><code>badMediaType</code></td>
            <td>415</td>
            <td>The requested content type is not supported by this service.</td>
          </tr>
          <tr>
            <td><code>unprocessableEntity</code></td>
            <td>422</td>
            <td>The requested resource could not be processed on at the moment.</td>
          </tr>
          <tr>
            <td><code>instanceFault</code></td>
            <td>500</td>
            <td>This is a generic server error and the message contains the reason for the error.
              This error could wrap several error messages and is a catch all.</td>
          </tr>
          <tr>
            <td><code>notImplemented</code></td>
            <td>501</td>
            <td>The requested method or resource is not implemented.</td>
          </tr>
          <tr>
            <td><code>serviceUnavailable</code></td>
            <td>503</td>
            <td>The Cloud Block Storage service is not available.</td>
          </tr>
        </tbody>
      </table>
      <para>The following <code>instanceFault</code> examples show errors when the server has erred
        or cannot perform the requested operation.</para>
      <example>
        <title>Example instanceFault response: XML</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-instanceFault-xml-http.txt" parse="text"/></programlisting>
        <programlisting language="xml"><xi:include href="../wadls/volume-api/src/samples/db-faults-instanceFault.xml" parse="text"/></programlisting>
      </example>
      <example>
        <title>Example fault response: JSON</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-instanceFault-json-http.txt" parse="text"/></programlisting>
        <programlisting language="json"><xi:include href="../wadls/volume-api/src/samples/db-faults-instanceFault.json" parse="text"/></programlisting>
      </example>
      <para>The error code (<code>code</code>) is returned in the body
        of the response for convenience. The <code>message</code>
        element returns a human-readable message that is appropriate
        for display to the end user. The <code>details</code> element
        is optional and may contain information that is useful for
        tracking down an error, such as a stack trace. The
          <code>details</code> element may or may not be appropriate
        for display to an end user, depending on the role and
        experience of the end user.</para>
      <para>The root element of the fault (for example, <code>instanceFault</code>) may change
        depending on the type of error. </para>
      <para><?rax-fo keep-with-next?>The following <code>badRequest</code> examples show errors when
        the volume size is invalid.</para>
      <example>
        <title>Example badRequest fault on volume size errors: XML</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-badRequest-xml-http.txt" parse="text"/></programlisting>


        <programlisting language="xml"><xi:include href="../wadls/volume-api/src/samples/db-faults-badRequest.xml" parse="text"/></programlisting>
      </example>
      <example>
        <title>Example badRequest fault on volume size errors: JSON</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-badRequest-json-http.txt" parse="text"/></programlisting>

        <programlisting language="json"><xi:include href="../wadls/volume-api/src/samples/db-faults-badRequest.json" parse="text"/></programlisting>
      </example>
      <para>The next examples show <code>itemNotFound</code> errors.</para>
      <example>
        <title>Example itemNotFound fault: XML</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-itemNotFound-xml-http.txt" parse="text"/></programlisting>


        <programlisting language="xml"><xi:include href="../wadls/volume-api/src/samples/db-faults-itemNotFound.xml" parse="text"/></programlisting>
      </example>
      <example>
        <title>Example itemNotFound fault: JSON</title>
        <?dbfo keep-together="always"?>
        <programlisting><xi:include href="../wadls/volume-api/src/samples/db-faults-itemNotFound-json-http.txt" parse="text"/></programlisting>


        <programlisting language="json"><xi:include href="../wadls/volume-api/src/samples/db-faults-itemNotFound.json" parse="text"/></programlisting>
      </example>
    </section>
  </chapter>
  <chapter xml:id="API_Operations"
    xmlns="http://docbook.org/ns/docbook" role="api-reference">
    <title>API operations</title>
    <para>The Cloud Block Storage API allows you to manage volumes and snapshots.</para>
    <para>This chapter describes each of the operations.</para>
    <section xml:id="volumes">
      <title>Volumes</title>
      <para>A volume is a detachable block storage device. You can think of it as a USB hard drive.
        You can attach a volume to one instance at a time.</para>
      <para xmlns:svg="http://www.w3.org/2000/svg" xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml"><?rax-fo keep-with-next?>When you make an API call
        to create, list, or delete volumes, the volume status values in the following table are
        possible.</para>
      <informaltable rules="all" xmlns:svg="http://www.w3.org/2000/svg"
        xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml">
 <!--       <caption>Volume status</caption> -->
        <col width="35%"/>
        <col width="65%"/>
        <thead>
          <tr>
            <th>Status</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CREATING</td>
            <td>The volume is being created.</td>
          </tr>
          <tr>
            <td>AVAILABLE</td>
            <td>The volume is ready to be attached to an instance.</td>
          </tr>
          <tr>
            <td>ATTACHING</td>
            <td>The volume is attaching to an instance.</td>
          </tr>
          <tr>
            <td>IN-USE</td>
            <td>The volume is attached to an instance.</td>
          </tr>
          <tr>
            <td>DELETING</td>
            <td>The volume is being deleted.</td>
          </tr>
          <tr>
            <td>ERROR</td>
            <td>An error occurred with the volume.</td>
          </tr>
          <tr>
            <td>ERROR_DELETING</td>
            <td>An error occurred during volume deletion. </td>
          </tr>
        </tbody>
      </informaltable>
      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#volumes">
          <wadl:method href="#createVolume"/>
          <wadl:method href="#getVolumesSimple"/>
        </wadl:resource>
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#detail">
          <wadl:method href="#getVolumesDetail"/>
        </wadl:resource>
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#volume_id">
          <wadl:method href="#getVolume"/>
          <wadl:method href="#renameVolume"/>
          <wadl:method href="#deleteVolume"/>
        </wadl:resource>
      </wadl:resources>
    </section>
    <section xml:id="volume_types">
      <title>Volume types</title>

      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#volume_types">
          <wadl:method href="#getVolumeTypes"/>
        </wadl:resource>
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#volume_type_id">
          <wadl:method href="#getVolumeType"/>
        </wadl:resource>
      </wadl:resources>
    </section>
    <section xml:id="snapshots">
      <title>Snapshots</title>
      <para>A snapshot is a point-in-time copy of the data that a volume contains.</para>
      <para xmlns:svg="http://www.w3.org/2000/svg" xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml"><?rax-fo keep-with-next?>When you make an API call
        to create, list, or delete snapshots, the status values in the following table are
        possible.</para>
      <informaltable rules="all" xmlns:svg="http://www.w3.org/2000/svg"
        xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml">
<!--     <caption>Snapshot status</caption> -->
        <col width="35%"/>
        <col width="65%"/>
        <thead>
          <tr>
            <th>Status</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CREATING</td>
            <td>The snapshot is being created.</td>
          </tr>
          <tr>
            <td>AVAILABLE</td>
            <td>The snapshot is ready for use. </td>
          </tr>
          <tr>
            <td>DELETING</td>
            <td>The snapshot is being deleted.</td>
          </tr>
          <tr>
            <td>ERROR</td>
            <td>An error occurred during snapshot creation.</td>
          </tr>
          <tr>
            <td>ERROR_DELETING</td>
            <td>An error occurred during snapshot deletion.</td>
          </tr>
        </tbody>
      </informaltable>
      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#snapshots">
          <wadl:method href="#createSnapshot"/>
          <wadl:method href="#getSnapshotsSimple"/>
        </wadl:resource>
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#snapshot_detail">
          <wadl:method href="#getSnapshotsDetail"/>
        </wadl:resource>
        <wadl:resource
          href="../wadls/volume-api/src/os-volume-1.wadl#snapshot_id">
          <wadl:method href="#getSnapshot"/>
          <wadl:method href="#updateSnapshot"/>
          <wadl:method href="#deleteSnapshot"/>
        </wadl:resource>
      </wadl:resources>
    </section>
  </chapter>
  <glossary xml:id="glossary-d1e018">
    <title>Glossary</title>
    <info>
      <raxm:metadata
        xmlns:raxm="http://docs.rackspace.com/api/metadata">
        <raxm:type>concept</raxm:type>
        <raxm:product version="v1.0">cbs</raxm:product>
        <raxm:priority>50</raxm:priority>
      </raxm:metadata>
    </info>
    <glossentry xml:id="instance-d1e017">
      <glossterm>Instance</glossterm>
      <glossdef>
        <para> An instance is a virtual machine that runs inside the
          cloud.</para>
      </glossdef>
    </glossentry>
    <glossentry xml:id="intanceType-d1e016">
      <glossterm>Instance type</glossterm>
      <glossdef>
        <para>An instance type describes the compute, memory, and storage capacity of Nova computing
          instances. In layman's terms, this is the size (in terms of vCPUs, RAM, and so forth) of
          the virtual server that you will be launching.</para>
      </glossdef>
    </glossentry>
    <glossentry xml:id="snapshot-d1e020">
      <glossterm>Snapshot</glossterm>
      <glossdef>
        <para>A snapshot is a point-in-time copy of the data contained
          in a volume.</para>
      </glossdef>
    </glossentry>
    <glossentry xml:id="volume-d1e019">
      <glossterm>Volume</glossterm>
      <glossdef>
        <para>A volume is a detachable block storage device. You can
          think of it as a USB hard drive. It can only be attached to
          one instance at a time.</para>
      </glossdef>
    </glossentry>
    <glossentry xml:id="volumeType-d1e018">
      <glossterm>Volume type</glossterm>
      <glossdef>
        <para>The volume type is the type of a block storage volume. There are two types: SATA for
          standard performance and SSD for high performance.</para>
      </glossdef>
    </glossentry>
  </glossary>
</book>
